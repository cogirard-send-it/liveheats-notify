<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>LiveHeats Notifier</title>

  <!-- PWA Manifest -->
  <link rel="manifest" href="manifest.json">

  <!-- Required for iOS PWA -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="apple-mobile-web-app-title" content="LiveHeats">

  <script>
    async function subscribe() {
      try {
        const registration = await navigator.serviceWorker.register("service-worker.js");

        const permission = await Notification.requestPermission();
        if (permission !== "granted") {
          alert("Notifications were not granted.");
          return;
        }

        const sub = await registration.pushManager.subscribe({
          userVisibleOnly: true,
          applicationServerKey: "YOUR_PUBLIC_VAPID_KEY"
        });

        // TODO: send subscription to your backend (we do this later)
        console.log("SUBSCRIPTION:", JSON.stringify(sub));
        document.getElementById("status").innerText = "Subscribed!";
      } catch (err) {
        console.error(err);
        alert("Subscription failed - check console");
      }
    }
  </script>
</head>

<body style="font-family: sans-serif; padding: 20px;">
  <h2>LiveHeats iPhone Notifier</h2>
  <p>Tap the button below to enable notifications.</p>

  <button onclick="subscribe()" style="padding: 10px 20px; font-size: 16px;">
    Enable Notifications
  </button>

  <p id="status" style="margin-top: 20px; font-weight: bold;"></p>
</body>
</html>
``
